on: [push, pull_request]
name: Test
jobs:
    test:
        strategy:
            matrix:
                go-version: [1.14.x, 1.15.x]
                os: [ubuntu-latest, macos-latest, windows-latest]
        runs-on: ${{ matrix.os }}
        steps:
            - name: Install Go
              uses: actions/setup-go@v2
              with:
                  go-version: ${{ matrix.go-version }}
            - name: Install dependencies
              run: |
                  go version
                  go get -u golang.org/x/lint/golint
            - name: Checkout code
              uses: actions/checkout@v2
            - name: Build
              run: go build -o mmt .
            - name: Upload MMT artifacts
              uses: actions/upload-artifact@v2
              with:
                  name: MMT
                  path: ${{ github.workspace }}/mmt
